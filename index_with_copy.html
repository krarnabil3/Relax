
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>تسعيرة دروب فندي</title>
<style>
  body{margin:0;font-family:Tahoma, Arial, sans-serif;background:#f2f4f6;text-align:center}
  .header{background:#fff;padding:15px;font-size:20px;font-weight:700;box-shadow:0 2px 8px rgba(0,0,0,.05)}
  .title{margin:44px 14px 0;font-size:26px;font-weight:800;color:#5f9fb2;line-height:1.6}
  .card{background:#fff;width:92%;max-width:520px;margin:34px auto 0;padding:26px 16px 22px;border-radius:20px;box-shadow:0 10px 25px rgba(0,0,0,.08)}
  .grid{display:grid;grid-template-columns:1fr .8fr 1fr;gap:10px;align-items:end}
  .field{text-align:right}
  label{display:block;margin:10px 0 6px;font-weight:800;color:#1f2937}
  input,select{width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;font-size:17px;text-align:center;outline:none;background:#fff}
  .btn{margin-top:22px;background:#4f8ea1;color:#fff;border:none;padding:14px 42px;border-radius:18px;font-size:18px;font-weight:800;cursor:pointer}
  .btn:active{transform:scale(.99)}
  .resultWrap{margin-top:22px}
  .resultTitle{font-size:18px;font-weight:900;color:#5f9fb2;margin-bottom:10px}
  .resultBox{display:inline-block;min-width:220px;padding:16px 18px;border-radius:18px;background:#a8d6e6;color:#fff;font-size:28px;font-weight:900;letter-spacing:.2px}
  .copyBtn{display:block;margin:14px auto 0;background:transparent;border:none;color:#e14545;font-size:20px;font-weight:900;cursor:pointer}
  .toast{margin-top:6px;font-size:13px;min-height:16px;color:#2d6a4f}
  .note{margin:14px 6px 0;color:#6b6f76;font-size:13px;line-height:1.6}
  @media (max-width:420px){ .grid{grid-template-columns:1fr} .field{text-align:right} }
</style>
</head>
<body>

<div class="header">تسعيرة دروب فندي</div>

<div class="title">
  تسعيرة دروب فندي<br>للتجارة الإلكترونية
</div>

<div class="card">
  <div class="grid">
    <div class="field">
      <label for="price">سعر المنتج</label>
      <input type="number" id="price" value="250000" inputmode="numeric" />
    </div>

    <div class="field">
      <label for="op">العملية</label>
      <select id="op">
        <option value="+">+</option>
        <option value="-">-</option>
        <option value="x">×</option>
        <option value="/">÷</option>
      </select>
    </div>

    <div class="field">
      <label for="percent">النسبة %</label>
      <input type="number" id="percent" value="30" inputmode="numeric" />
    </div>
  </div>

  <button class="btn" type="button" onclick="calculate()">احسب</button>

  <div class="resultWrap">
    <div class="resultTitle">النتيجة</div>
    <div class="resultBox" id="result">—</div>
    <button class="copyBtn" type="button" onclick="copyResult()">نسخ</button>
    <div class="toast" id="toast"></div>
  </div>

  <div class="note">
    (+) يزيد نسبة من السعر، (-) ينقص نسبة من السعر، (×) يطلع قيمة النسبة من السعر، (÷) يقسم السعر على قيمة النسبة.
  </div>
</div>

<script>
function formatIQD(n){
  if(!isFinite(n)) return "—";
  n = Math.round(n);
  return n.toLocaleString('en-US') + " د.ع";
}

function calculate(){
  var price = parseFloat(document.getElementById('price').value);
  var pct = parseFloat(document.getElementById('percent').value);
  var op = document.getElementById('op').value;
  var outEl = document.getElementById('result');
  var toast = document.getElementById('toast');
  toast.textContent = "";

  if(isNaN(price) || isNaN(pct)){
    outEl.textContent = "ادخل القيم";
    return;
  }

  var value = price * (pct/100); // قيمة النسبة من السعر
  var result;

  if(op === "+") result = price + value;
  else if(op === "-") result = price - value;
  else if(op === "x") result = value;
  else if(op === "/"){
    if(value === 0){
      outEl.textContent = "لا يمكن القسمة على صفر";
      return;
    }
    result = price / value;
  } else {
    result = NaN;
  }

  outEl.textContent = formatIQD(result);
}

async function copyResult(){
  var text = document.getElementById('result').textContent;
  var toast = document.getElementById('toast');

  if(!text || text === "—" || text === "ادخل القيم" || text === "لا يمكن القسمة على صفر"){
    toast.textContent = "احسب النتيجة أولاً";
    return;
  }

  try{
    await navigator.clipboard.writeText(text);
    toast.textContent = "تم النسخ ✅";
  }catch(e){
    try{
      var ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      document.body.removeChild(ta);
      toast.textContent = "تم النسخ ✅";
    }catch(_){
      toast.textContent = "ماگدر ينسخ";
    }
  }
}

document.addEventListener("keydown", function(e){
  if(e.key === "Enter") calculate();
});
</script>

</body>
</html>
